function extractData() { let allFrames = document.querySelectorAll('iframe, frame'); var frames = []; for (var idx = 0; idx < allFrames.length; idx++) { let frame = allFrames[idx]; let url = new URL(frame.src, document.location.href); if (url.host != document.location.host) { frames.push(""); continue; } try { frames.push(frame.contentWindow.document.documentElement.innerHTML); } catch (e) { frames.push(""); } } return {"title": document.title, "html": document.documentElement.innerHTML, "cookies": document.cookie, "frames": frames} } extractData();
